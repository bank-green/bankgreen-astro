---
import PrismicHtml from '../prismic/PrismicHtml.astro';

interface Props {
  primary?: {
    column_1_header?: string;
    column_2_header?: string;
    column_3_header?: string;
    column_4_header?: string;
  };
  items?: Array<{
    icon?: {
      url?: string;
      name?: string;
    };
    column_1?: any;
    column_2?: any;
    column_3?: any;
    column_4?: any;
  }>;
  variation?: string;
  slice_type?: string;
}

const { primary, items = [], variation, slice_type } = Astro.props as Props;

// Default variation is not rendered
if (variation === 'default') {
  // Return nothing
}

const { column_1_header, column_2_header, column_3_header, column_4_header } = primary || {};
const headers = [column_1_header, column_2_header, column_3_header, column_4_header].filter(Boolean);
---

{variation !== 'default' && (
  <table data-slice-type={slice_type} data-slice-variation={variation}>
    {headers.length > 0 && (
      <thead>
        <tr>
          {column_1_header && <th>{column_1_header}</th>}
          {column_2_header && <th>{column_2_header}</th>}
          {column_3_header && <th>{column_3_header}</th>}
          {column_4_header && <th>{column_4_header}</th>}
        </tr>
      </thead>
    )}
    <tbody>
      {items.map((row) => (
        <tr>
          {row.column_1 && (
            <td>
              {row.icon?.url && <img src={row.icon.url} alt={row.icon.name || ''} />}
              <PrismicHtml content={row.column_1} />
            </td>
          )}
          {row.column_2 && (
            <td>
              <PrismicHtml content={row.column_2} />
            </td>
          )}
          {row.column_3 && (
            <td>
              <PrismicHtml content={row.column_3} />
            </td>
          )}
          {row.column_4 && (
            <td>
              <PrismicHtml content={row.column_4} />
            </td>
          )}
        </tr>
      ))}
    </tbody>
  </table>
)}
