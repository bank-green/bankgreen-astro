/* Design tokens - generated from tokens.mjs */
@import "./tokens.generated.css";
/* Skip importing preflight to avoid conflicts with Mantine's own CSS resets */
@import "tailwindcss/theme.css" layer(base);
/* Mantine core styles - imported once globally */
@import "@mantine/core/styles.css" layer(theme);
@import "tailwindcss/utilities.css" layer(utilities);
@import "./overrides.css";

/* Tailwind Typography plugin; places classes in the `components` layer */
@plugin "@tailwindcss/typography";

@layer base, components, theme, utilities;

:root {
  --font-family:
    "Reddit Sans", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
    "Helvetica Neue", Arial, sans-serif;
}

/* Necessary while loading to avoid FOUC on inputs  */
.mantine-Loader-root {
  --loader-color: var(--color-linkDefault);
}
.mantine-Autocomplete-input {
  color: var(--color-textDefault);
  background-color: white;
  border: 1px solid var(--color-linkDefault, currentColor);
}

@layer theme {
  html {
    scroll-behavior: smooth;
    font-family: var(--font-family);
    font-size: var(--mantine-font-size-md);
    line-height: var(--mantine-line-height);
    background-color: var(--mantine-color-bg);
  }
  body {
    --mantine-color-bg: var(--color-sushi-100);
    --mantine-color-body: var(--color-white);
    --mantine-color-default-color: var(--color-linkDefault);
    --mantine-color-default-border: var(--color-borderDefault);
    --mantine-color-text: var(--color-textDefault);
    --mantine-color-headings: var(--color-textHeadings);
    --mantine-font-family: var(--font-family);
    --mantine-line-height: 1.55;

    /* Fluid typography scale  @link https://utopia.fyi/type/calculator?c=360,16,1.125,1240,19,1.125,5,2,&s=0.75|0.5|0.25,1.5|2|3|4|6,s-l&g=s,l,xl,12 */
    --mantine-font-size-md: clamp(1rem, 0.9489rem + 0.2273vw, 1.125rem);
    --mantine-h5-font-size: clamp(1.125rem, 1.0675rem + 0.2557vw, 1.2656rem);
    --mantine-h4-font-size: clamp(1.2656rem, 1.2009rem + 0.2876vw, 1.4238rem);
    --mantine-h3-font-size: clamp(1.4238rem, 1.351rem + 0.3236vw, 1.6018rem);
    --mantine-h2-font-size: clamp(1.6018rem, 1.5199rem + 0.364vw, 1.802rem);
    --mantine-h1-font-size: clamp(1.802rem, 1.7099rem + 0.4096vw, 2.0273rem);

    --mantine-h1-font-weight: 650;
    --mantine-h1-line-height: 1.1;
    --mantine-h2-font-weight: 700;
    --mantine-h2-line-height: 1.1;
    --mantine-h3-font-weight: 700;
    --mantine-h3-line-height: 1.1;
    --mantine-h4-font-weight: 650;
    --mantine-h4-line-height: 1.1;
    --mantine-h5-font-weight: 600;
    --mantine-h5-line-height: 1.1;
    background-color: var(--mantine-color-body);
    color: var(--mantine-color-text);
  }

  /* @link https://utopia.fyi/type/calculator?c=360,16,1.125,1240,18,1.125,5,2,&s=0.75|0.5|0.25,1.5|2|3|4|6,s-l&g=s,l,xl,12 */

  :root {
    --mantine-h--2: clamp(0.7901rem, 0.7497rem + 0.1796vw, 0.8889rem);
    --mantine-h--1: clamp(0.8889rem, 0.8434rem + 0.202vw, 1rem);
    --mantine-h-0: clamp(1rem, 0.9489rem + 0.2273vw, 1.125rem);
    --mantine-h-1: clamp(1.125rem, 1.0675rem + 0.2557vw, 1.2656rem);
    --mantine-h-2: clamp(1.2656rem, 1.2009rem + 0.2876vw, 1.4238rem);
    --mantine-h-3: clamp(1.4238rem, 1.351rem + 0.3236vw, 1.6018rem);
    --mantine-h-4: clamp(1.6018rem, 1.5199rem + 0.364vw, 1.802rem);
    --mantine-h-5: clamp(1.802rem, 1.7099rem + 0.4096vw, 2.0273rem);
  }

  h1,
  h2,
  h3 {
    color: var(--mantine-color-headings);
  }

  .text-textInverse {
    h1,
    h2,
    h3 {
      color: var(--color-textInverse);
    }
    a.visited,
    a:-webkit-any-link {
      color: var(--color-linkInverse);
    }
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    margin-top: 0;
    margin-block-start: 0;
  }

  li {
    margin-left: 1em;
  }

  /** Legacy global styles from Nuxt app **/

  body {
    -webkit-tap-highlight-color: transparent;
    /* to avoid android selection flash */
    touch-action: manipulation;
    /* disable double-tap to zoom */
    -webkit-touch-callout: none;
    /* disable ios callout */
    @apply bg-gray-50 text-gray-900 antialiased;
    overflow-y: scroll;
  }

  a:not([class^="mantine"]):not(:has([class^="mantine"])):-webkit-any-link,
  a:not([class^="mantine"]):not(:has([class^="mantine"])).link {
    @apply transition-all duration-150 font-medium text-linkDefault hover:underline hover:text-linkHover active:text-linkActive focus:underline;
  }

  a:not([class^="mantine"]):not(:has([class^="mantine"])) {
    text-decoration: none;
    @apply no-underline hover:underline underline-offset-0 hover:underline-offset-1 decoration-[0.5em] hover:decoration-[0.15em] decoration-green-500/15;
  }

  a.mantine-Anchor-root:not(:has(.mantine-Card-root)) {
    @apply hover:underline;
  }

  .text-textInverse a {
    @apply text-linkInverse!;
  }

  .text-textInverse .mantine-TextInput-error,
  .text-textInverse .mantine-Checkbox-error,
  .text-textInverse .mantine-InputWrapper-required {
    --mantine-color-error: var(--color-red-300);
  }

  a.mantine-Button-root,
  a:has(.mantine-Card-root) {
    text-decoration: none;
    @apply no-underline hover:no-underline;
  }
  .underlineLink a {
    @apply hover:underline;
  }

  b {
    font-weight: 600;
  }
  strong {
    font-weight: 600;
  }

  ::selection {
    @apply bg-sky-500/25 text-textDefault;
  }

  .contain {
    @apply w-full max-w-6xl mx-auto px-8 lg:px-0;
  }

  .overflow-y-scroll {
    -webkit-overflow-scrolling: touch;
  }

  .font-secondary a {
    text-decoration: underline;
  }

  * {
    scrollbar-width: thin;
    scrollbar-color: var(--colors-sushi-500) var(--colors-sushi-100);
  }

  *::-webkit-scrollbar {
    width: 8px;
  }

  *::-webkit-scrollbar-track {
    background: var(--colors-sushi-100);
  }

  *::-webkit-scrollbar-thumb {
    border-radius: 4px;
    background-color: var(--colors-sushi-500);
  }

  .swoosh-bg {
    background-size: 100% 100%;
    background-position: bottom right;
    background-image: url("/img/backgrounds/swoosh.svg");
    background-repeat: no-repeat;
    color: white;
  }
}

/* Base swoosh utility - shared pseudo-element */
@utility swoosh {
  overflow: hidden;
  position: relative;
  z-index: 0;
  --swoosh-height: clamp(100px, 15dvw, 300px);
  --swoosh-width: 102.5%;
  --swoosh-color: white;
  --swoosh-padding: calc(var(--swoosh-height) * 0.8);

  &::before {
    content: "";
    display: block;
    width: var(--swoosh-width);
    height: var(--swoosh-height);
    position: absolute;
    overflow: hidden;
    border-radius: 0%;
    z-index: -1;
    top: var(--swoosh-top, auto);
    bottom: var(--swoosh-bottom, auto);
    left: var(--swoosh-left, auto);
    right: var(--swoosh-right, auto);
    background: radial-gradient(
      ellipse var(--swoosh-width) 100% at var(--swoosh-gradient-at),
      transparent 100%,
      var(--swoosh-color) 100.15%
    );
  }
}

/* Direction utilities - only set positioning */
@utility swoosh-bl {
  --swoosh-bottom: 0;
  --swoosh-right: 0;
  --swoosh-gradient-at: top right;
  padding-bottom: var(--swoosh-padding);
}

@utility swoosh-br {
  --swoosh-bottom: 0;
  --swoosh-left: 0;
  --swoosh-gradient-at: top left;
  padding-bottom: var(--swoosh-padding);
}

@utility swoosh-tl {
  --swoosh-top: 0;
  --swoosh-right: 0;
  --swoosh-gradient-at: bottom right;
  padding-top: var(--swoosh-padding);
}

@utility swoosh-tr {
  --swoosh-top: 0;
  --swoosh-left: 0;
  --swoosh-gradient-at: bottom left;
  padding-top: var(--swoosh-padding);
}

@utility swoosh-none {
  &::before {
    content: none;
  }
}
