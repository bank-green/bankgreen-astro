/* Design tokens - generated from tokens.mjs */
@import "./tokens.generated.css";
/* Skip importing preflight to avoid conflicts with Mantine's own CSS resets */
@import "tailwindcss/theme.css" layer(base);
/* Mantine core styles - imported once globally */
@import "@mantine/core/styles.css" layer(theme);
@import "tailwindcss/utilities.css" layer(utilities);
@import "./overrides.css";

/* Tailwind Typography plugin; places classes in the `components` layer */
@plugin "@tailwindcss/typography";

@layer base, components, theme, utilities;

/* 
 * Mantine requires these CSS variables - they're set by MantineProvider
 * but we define fallbacks here for static Astro pages
 */
:root {
  --font-family:
    "Reddit Sans", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
    "Helvetica Neue", Arial, sans-serif;
}

@layer theme {
  html {
    scroll-behavior: smooth;
    font-family: var(--font-family);
    font-size: var(--mantine-font-size-md);
    line-height: var(--mantine-line-height);
    background-color: var(--mantine-color-bg);
  }
  body {
    --mantine-color-default-color: var(--color-linkDefault);
    --mantine-color-bg: var(--color-sushi-100);
    --mantine-color-body: var(--color-white);
    --mantine-font-family: var(--font-family);
    --mantine-font-size-md: 1rem;
    --mantine-line-height: 1.55;
    --mantine-color-text: var(--color-textDefault);
    --mantine-color-headings: var(--color-textHeadings);
    --mantine-h1-font-size: 2.5rem;
    --mantine-h1-font-weight: 650;
    --mantine-h1-line-height: 1.2;
    --mantine-h2-font-size: 2.15rem;
    --mantine-h2-font-weight: 700;
    --mantine-h2-line-height: 1.2;
    --mantine-h3-font-size: 1.75rem;
    --mantine-h3-font-weight: 700;
    --mantine-h3-line-height: 1.2;
    --mantine-h4-font-size: 1.35rem;
    --mantine-h4-font-weight: 650;
    --mantine-h4-line-height: 1.2;
    --mantine-h5-font-size: 1.15rem;
    --mantine-h5-font-weight: 600;
    --mantine-h5-line-height: 1.2;
    background-color: var(--mantine-color-body);
    color: var(--mantine-color-text);
  }
  h1,
  h2,
  h3 {
    color: var(--mantine-color-headings);
  }

  .text-textInverse {
    h1,
    h2 {
      color: var(--color-sky-100);
    }
    a.visited,
    a:-webkit-any-link {
      color: var(--color-linkInverse);
    }
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    margin-top: 0;
    margin-block-start: 0;
  }

  li {
    margin-left: 1em;
  }

  /** Legacy global styles from Nuxt app **/

  body {
    -webkit-tap-highlight-color: transparent;
    /* to avoid android selection flash */
    touch-action: manipulation;
    /* disable double-tap to zoom */
    -webkit-touch-callout: none;
    /* disable ios callout */
    @apply bg-gray-50 text-gray-900 antialiased;
    overflow-y: scroll;
  }

  a:not([class^="mantine"]):not(:has([class^="mantine"])):-webkit-any-link,
  a:not([class^="mantine"]):not(:has([class^="mantine"])).link {
    @apply transition-all duration-150 font-medium text-linkDefault hover:underline hover:text-linkHover active:text-linkActive focus:underline;
  }

  a:not([class^="mantine"]):not(:has([class^="mantine"])) {
    text-decoration: none;
    @apply no-underline hover:underline underline-offset-0 hover:underline-offset-1 decoration-[0.5em] hover:decoration-[0.15em] decoration-green-500/15;
  }

  a.mantine-Anchor-root:not(:has(.mantine-Card-root)) {
    @apply hover:underline;
  }

  .text-textInverse a {
    @apply text-linkInverse!;
  }

  a.mantine-Button-root,
  a:has(.mantine-Card-root) {
    text-decoration: none;
    @apply no-underline hover:no-underline;
  }
  .underlineLink a {
    @apply hover:underline;
  }

  b {
    font-weight: 600;
  }
  strong {
    font-weight: 600;
  }

  ::selection {
    @apply bg-sky-500/25 text-textDefault;
  }

  .contain {
    @apply w-full max-w-6xl mx-auto px-8 lg:px-0;
  }

  .overflow-y-scroll {
    -webkit-overflow-scrolling: touch;
  }

  .font-secondary a {
    text-decoration: underline;
  }

  * {
    scrollbar-width: thin;
    scrollbar-color: var(--colors-sushi-500) var(--colors-sushi-100);
  }

  *::-webkit-scrollbar {
    width: 8px;
  }

  *::-webkit-scrollbar-track {
    background: var(--colors-sushi-100);
  }

  *::-webkit-scrollbar-thumb {
    border-radius: 4px;
    background-color: var(--colors-sushi-500);
  }
}
