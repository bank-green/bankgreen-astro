---
import BaseLayout from "@layouts/BaseLayout.astro";
import { getByUIDSafe, getAllByTypeSafe } from "@lib/prismic";
import { SlicePage } from "@components/pages";

export async function getStaticPaths() {
  const pages = await getAllByTypeSafe("accreditationpage");
  return pages.map((page) => ({ params: { slug: page.uid } }));
}

const { slug } = Astro.params;
const page = await getByUIDSafe("accreditationpage", slug as string);

if (!page) {
  return Astro.redirect("/404");
}

const title = page.data.hero_title || "Accreditation";
---

<BaseLayout title={title}>
  <SlicePage title={title} page={page} />
</BaseLayout>
