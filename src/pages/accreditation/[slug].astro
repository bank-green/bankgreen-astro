---
import { SlicePage } from '@components/pages'
import BaseLayout from '@layouts/BaseLayout.astro'
import { getAllByTypeSafe, getByUIDSafe } from '@lib/prismic'

export const prerender = true

export async function getStaticPaths() {
  const pages = await getAllByTypeSafe('accreditationpage')
  return pages.map((page) => ({ params: { slug: page.uid } }))
}

const { slug } = Astro.params
const page = await getByUIDSafe('accreditationpage', slug as string)

if (!page) {
  return Astro.redirect('/404')
}

const title = page.data.hero_title || 'Accreditation'
---

<BaseLayout title={title}>
  <SlicePage title={title} page={page} client:load />
</BaseLayout>
