---
import BaseLayout from "@layouts/BaseLayout.astro";
import { BankScorePage } from "@components/pages";

interface BankData {
  tag: string;
  name: string;
  rating?: string;
}

export async function getStaticPaths() {
  // TODO: Fetch all banks from GraphQL
  // const data = await graphqlFetch(`query { banks { tag } }`);
  // return data.banks.map((bank) => ({ params: { bankTag: bank.tag } }));
  return [];
}

const { bankTag } = Astro.params;

// TODO: Fetch bank data from GraphQL
const bank: BankData | null = null;

const bankName = (bank as BankData | null)?.name ?? "Bank";
const title = `${bankName}'s Climate Score`;
---

<BaseLayout title={title}>
  <BankScorePage bank={bank} client:load />
</BaseLayout>
