---
import { HomePage } from '@components/pages/HomePage'
import BaseLayout from '@layouts/BaseLayout.astro'
import { getSingleSafe } from '@lib/prismic'

export const prerender = true

const page = await getSingleSafe('homepage')
const rawTitle =
  page?.data?.seo_title || page?.data?.title || 'Find Ethical & Sustainable Banks In Your Area'
// Remove old "- Bank.Green" suffix if present (BaseLayout adds "| Bank.Green")
const title = rawTitle.replace(/\s*-\s*Bank\.Green\s*$/i, '')
const description = page?.data?.seo_description || undefined
const ogImage = page?.data?.seo_image?.url || undefined
---

<BaseLayout title={title} description={description} ogImage={ogImage}>
  <HomePage page={page} client:load />
</BaseLayout>
